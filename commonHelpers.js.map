{"version":3,"file":"commonHelpers.js","sources":["../src/js/dateRender.js","../src/js/localStorage.js","../src/js/todoMarkup.js","../src/js/BgImg.js","../src/js/getNewQuote.js","../src/js/editing.js","../src/js/script.js"],"sourcesContent":["const refs = {\n  time: document.querySelector('.time'),\n};\n\nfunction getTime() {\n  const currentDate = new Date();\n  const days = currentDate.getDate().toString().padStart(2, '0');\n  const months = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December',\n  ];\n  const month = months[currentDate.getMonth()];\n  const year = currentDate.getFullYear();\n  const hours = currentDate.getHours().toString().padStart(2, '0');\n  const minutes = currentDate.getMinutes().toString().padStart(2, '0');\n  const seconds = currentDate.getSeconds().toString().padStart(2, '0');\n\n  return `${days} ${month} ${year}, ${hours}:${minutes}:${seconds}`;\n}\n\nfunction updateTime() {\n  refs.time.textContent = getTime();\n}\n\nsetInterval(updateTime, 1000);\nupdateTime();\n\nexport default Date;\n","export function saveToLs(key, value) {\n  const json = JSON.stringify(value);\n  localStorage.setItem(key, json);\n}\n\nexport function loadFromLs(key) {\n  const json = localStorage.getItem(key);\n  try {\n    const data = JSON.parse(json);\n    return data;\n  } catch {\n    return null;\n  }\n}\n","export function sortTodosByPriority(todos) {\n  const priorityOrder = { high: 3, medium: 2, low: 1 };\n  return todos.sort(\n    (a, b) => priorityOrder[b.priority] - priorityOrder[a.priority]\n  );\n}\n\nexport function createBgColor(priority) {\n  switch (priority) {\n    case 'high':\n      return '#F08080';\n    case 'medium':\n      return '#FFFACD';\n    case 'low':\n      return '#D3D3D3';\n    default:\n      return '#fff';\n  }\n}\n\nexport function createTodoMarkup({ text, priority, id }) {\n  const bgColor = createBgColor(priority);\n\n  return `\n      <li class=\"todos-item\" style=\"background-color: ${bgColor}\">\n        <span class=\"todos-text\">${text}</span>\n        <span class=\"todos-info\">${priority}</span>\n        <div class=\"btn-wrapper\">\n          <button id=\"edit\" class=\"edit\" data-id=\"${id}\" type=\"button\">&#9998;</button>\n          <button id=\"done\" class=\"done\" data-id=\"${id}\" type=\"button\">&#10003;</button>\n          <button id=\"delete\" class=\"delete\" data-id=\"${id}\" type=\"button\">&#10007;</button>\n        </div>\n      </li>`;\n}\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getBgImg(q) {\n  try {\n    const response = await axios.get('', {\n      params: {\n        key: '44946850-4c776fe0ffa968f959f660738',\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Fetch error: ', error);\n    throw error;\n  }\n}\n\nexport function getTimeOfDay() {\n  const now = new Date();\n  const hours = now.getHours();\n  if (hours >= 6 && hours < 10) {\n    return 'morning';\n  } else if (hours >= 10 && hours < 16) {\n    return 'work';\n  } else if (hours >= 16 && hours < 19) {\n    return 'evening';\n  } else {\n    return 'night';\n  }\n}\n\nexport function updateBackground() {\n  const timeOfDay = getTimeOfDay();\n  getBgImg(timeOfDay)\n    .then(data => {\n      if (data.hits.length > 0) {\n        const randomImg =\n          data.hits[Math.floor(Math.random() * data.hits.length)].webformatURL;\n        document.body.style.backgroundImage = `url(${randomImg})`;\n      } else {\n        console.log('No images found for this query');\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching background image:', error);\n    });\n}\n\nupdateBackground();\n\nsetInterval(updateBackground, 3600000);\n","const text = document.getElementById('quote');\nconst author = document.getElementById('author');\n\nexport const getNewQuote = async () => {\n  var url = 'https://type.fit/api/quotes';\n\n  const response = await fetch(url);\n  console.log(typeof response);\n\n  const allQuotes = await response.json();\n\n  const indx = Math.floor(Math.random() * allQuotes.length);\n  const quote = allQuotes[indx].text;\n  const auth = allQuotes[indx].author;\n\n  if (auth == null) {\n    author = 'Anonymous';\n  }\n\n  text.innerHTML = quote;\n  author.innerHTML = '~ ' + auth;\n};\n","import { sortTodosByPriority, createTodoMarkup } from './todoMarkup';\nimport { saveToLs } from './localStorage';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function startEditing(todoId, todoItem, todos, refs) {\n  const currentTodo = todos.find(todo => todo.id === todoId);\n\n  const editForm = `\n      <input type=\"text\" class=\"edit-input\" value=\"${currentTodo.text}\" />\n      <select class=\"edit-select\">\n        <option value=\"low\" ${\n          currentTodo.priority === 'low' ? 'selected' : ''\n        }>Low</option>\n        <option value=\"medium\" ${\n          currentTodo.priority === 'medium' ? 'selected' : ''\n        }>Medium</option>\n        <option value=\"high\" ${\n          currentTodo.priority === 'high' ? 'selected' : ''\n        }>High</option>\n      </select>\n      <button id=\"save\" data-id=\"${todoId}\">Save</button>\n      <button id=\"cancel\" data-id=\"${todoId}\">Cancel</button>\n    `;\n\n  todoItem.innerHTML = editForm;\n\n  document\n    .querySelector(`#save[data-id=\"${todoId}\"]`)\n    .addEventListener('click', () => saveEditing(todoId, todos, refs));\n  document\n    .querySelector(`#cancel[data-id=\"${todoId}\"]`)\n    .addEventListener('click', () => cancelEditing(todos, refs));\n}\n\nexport function saveEditing(todoId, todos, refs) {\n  const editInput = document.querySelector(`.edit-input`);\n  const editSelect = document.querySelector(`.edit-select`);\n\n  const updatedText = editInput.value.trim();\n  const updatedPriority = editSelect.value;\n\n  if (!updatedText) {\n    return iziToast.error({\n      title: 'Error',\n      message: 'Task name cannot be empty',\n      position: 'bottomRight',\n    });\n  }\n\n  const todoIndex = todos.findIndex(todo => todo.id === todoId);\n  todos[todoIndex].text = updatedText;\n  todos[todoIndex].priority = updatedPriority;\n\n  todos = sortTodosByPriority(todos);\n  saveToLs('todos', todos);\n  renderTodos(todos, refs);\n}\n\nexport function cancelEditing(todos, refs) {\n  renderTodos(todos, refs);\n}\n\nfunction renderTodos(todos, refs) {\n  refs.todoList.innerHTML = todos.map(createTodoMarkup).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport Data from './dateRender';\nimport { saveToLs, loadFromLs } from './localStorage';\nimport { sortTodosByPriority, createTodoMarkup } from './todoMarkup';\nimport { getBgImg, getTimeOfDay, updateBackground } from './BgImg';\nimport { getNewQuote } from './getNewQuote';\nimport { startEditing, cancelEditing, saveEditing } from './editing';\n\nconst refs = {\n  form: document.querySelector('.js-form'),\n  todoList: document.querySelector('.todos-list'),\n  select: document.querySelector('.todos-select'),\n};\n\nlet todos = loadFromLs('todos') || [];\n\nrefs.form.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const todosName = e.currentTarget.elements.todos.value.trim();\n  const todosPriority = e.currentTarget.elements.select.value;\n\n  if (!todosName || !todosPriority) {\n    return iziToast.error({\n      title: 'Error',\n      message: 'Please enter both a task and a priority',\n      position: 'bottomRight',\n    });\n  }\n\n  if (todos.some(todo => todo.text === todosName)) {\n    return iziToast.warning({\n      title: 'Warning',\n      message: 'You already have such a task',\n      position: 'bottomRight',\n    });\n  }\n\n  const todo = {\n    id: Date.now(),\n    text: todosName,\n    priority: todosPriority,\n  };\n  todos.push(todo);\n  todos = sortTodosByPriority(todos);\n  saveToLs('todos', todos);\n\n  refs.todoList.innerHTML = todos.map(createTodoMarkup).join('');\n  refs.todoList.scrollTop = refs.todoList.scrollHeight;\n  e.currentTarget.reset();\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (todos.length) {\n    todos = sortTodosByPriority(todos);\n    refs.todoList.innerHTML = todos.map(createTodoMarkup).join('');\n  }\n});\n\nrefs.todoList.addEventListener('click', e => {\n  if (e.target.nodeName !== 'BUTTON') return;\n\n  const todoId = Number(e.target.dataset.id);\n\n  if (e.target.id === 'delete') {\n    todos = todos.filter(item => item.id !== todoId);\n    saveToLs('todos', todos);\n    e.target.closest('.todos-item').remove();\n  }\n\n  if (e.target.id === 'done') {\n    const todoItem = e.target.closest('.todos-item');\n    todoItem.querySelector('.todos-text').style.textDecoration = 'line-through';\n  }\n\n  if (e.target.id === 'edit') {\n    const todoItem = e.target.closest('.todos-item');\n    startEditing(todoId, todoItem, todos, refs);\n  }\n});\n\nwindow.addEventListener('load', updateBackground);\nsetInterval(updateBackground, 3600000);\ngetNewQuote();\n"],"names":["refs","getTime","currentDate","days","month","year","hours","minutes","seconds","updateTime","saveToLs","key","value","json","loadFromLs","sortTodosByPriority","todos","priorityOrder","a","b","createBgColor","priority","createTodoMarkup","text","id","axios","getBgImg","q","error","getTimeOfDay","updateBackground","timeOfDay","data","randomImg","author","getNewQuote","url","response","allQuotes","indx","quote","auth","startEditing","todoId","todoItem","currentTodo","todo","editForm","saveEditing","cancelEditing","editInput","editSelect","updatedText","updatedPriority","iziToast","todoIndex","renderTodos","todosName","todosPriority","item"],"mappings":"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"}